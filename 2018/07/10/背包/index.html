<!DOCTYPE html>




<html class="theme-next gemini" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="背包," />










<meta name="description" content="背包专题">
<meta property="og:type" content="article">
<meta property="og:title" content="背包">
<meta property="og:url" content="czjxyz�.github.io/2018/07/10/背包/index.html">
<meta property="og:site_name" content="Konnyaku_czjxyz_blog">
<meta property="og:description" content="背包专题">
<meta property="og:updated_time" content="2018-07-10T00:33:37.296Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="背包">
<meta name="twitter:description" content="背包专题">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="czjxyz�.github.io/2018/07/10/背包/"/>





  <title>背包 | Konnyaku_czjxyz_blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Konnyaku_czjxyz_blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">about_OI_note</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="czjxyz�.github.io/2018/07/10/背包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="czjxyz">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Konnyaku_czjxyz_blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">背包</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-10T08:32:33+08:00">
                2018-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="背包专题"><a href="#背包专题" class="headerlink" title="背包专题"></a>背包专题</h1><a id="more"></a>
<h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p>最基础的背包，建立在一切背包的基础，及每一个物品只能选择一次，对于一定的背包容量，求得最大价值。</p>
<p>我们不难发现转移方程 check(dp[j],dp[j-A[i].cost]+A[i].val)</p>
<p>注意倒着扫数组，能够有效的省掉第一维。</p>
<h3 id="依赖背包"><a href="#依赖背包" class="headerlink" title="依赖背包"></a>依赖背包</h3><p>即对一每一组背包，都有对他依赖的盒子，如果要装物品，必须买盒子，然后01背包。</p>
<p>这里注意将盒子的花费转为-1，如果有多组的背包，注意将上层的dp转移。</p>
<p>即 if(dp[j-A[i].cost]!=-1) check(…)</p>
<h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><p>也就是01背包升级，对于一个物品能够多次使用。</p>
<p>其实也算是降低了难度，那么我们将循环反过来，即他的子状态，一定已经被该物品更新过了。</p>
<h3 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h3><p>不同于完全背包，对于每一个物品，它都只能使用有限次。</p>
<p>当然，普通的题目如果暴力肯定会超时，所以这里采用二进制优化，通过二进制，将多重背包转化为01背包。</p>
<p>转化方式 ：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> len=<span class="number">0</span>,base=<span class="number">1</span>;</span><br><span class="line">node x;<span class="comment">//x物品</span></span><br><span class="line"><span class="keyword">while</span>((base&lt;&lt;<span class="number">1</span>)&lt;=A[now].num) &#123;</span><br><span class="line">	change(x,base,now);<span class="comment">//物品倍增</span></span><br><span class="line">	base&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> r=w; r&gt;=x.cost; r--)<span class="comment">//01背包</span></span><br><span class="line">		<span class="keyword">if</span>(f[r-x.cost]!=inf)</span><br><span class="line">			check(f[r],f[r-x.cost]+x.val);</span><br><span class="line">&#125;</span><br><span class="line">change(x,A[now].num-base+<span class="number">1</span>,now);<span class="comment">//二进制处理</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> r=w; r&gt;=x.cost; r--)</span><br><span class="line">	<span class="keyword">if</span>(f[r-x.cost]!=inf)</span><br><span class="line">		check(f[r],f[r-x.cost]+x.val);</span><br></pre></td></tr></table></figure>
<p>不难证明对于2^0…2^(k-1)和n-2^k+1可以表示[1,n]的所有数，这样可以大大的减小时间复杂的</p>
<p>即将∑num优化为∑log(num)</p>
<h3 id="混合背包"><a href="#混合背包" class="headerlink" title="混合背包"></a>混合背包</h3><p>即将上述的4种背包有机地结合，遇到例题再个别讲解</p>
<h3 id="分组背包"><a href="#分组背包" class="headerlink" title="分组背包"></a>分组背包</h3><p>即有多组，一组只能取一个物品</p>
<p>注意在循环是要先循环V（倒着）再循环物品，如果实在无法理解，滚动数组是个不错的选择。</p>
<hr>
<h1 id="背包例题"><a href="#背包例题" class="headerlink" title="背包例题"></a>背包例题</h1><h3 id="A-In-Action-来源不详"><a href="#A-In-Action-来源不详" class="headerlink" title="A - In Action(来源不详)"></a>A - In Action(来源不详)</h3><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给出一个图。每个点都有自己的权值，坦克到那些地方的代价都是最短路的长度。求取得这个图的一半权值的最小代价 </p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>有机地将最短路算法和01背包有机地结合。这里将权值作为价值，最短路径作为花费，在求最短路之后再跑一遍01背包就好了</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 105</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1000000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(x,y) (x)&gt;(y)?(y):(x)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> Edge &#123;</span><br><span class="line">	<span class="keyword">int</span> to,cost;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;Edge&gt; G[M];</span><br><span class="line"><span class="keyword">int</span> dis[M],vis[M],elpow[M],dp[M*M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		<span class="keyword">int</span> n,m,tot=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) G[i].clear(),dis[i]=inf,vis[i]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> s,e,di;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;s,&amp;e,&amp;di);</span><br><span class="line">			G[s].push_back((Edge) &#123;</span><br><span class="line">				e,di</span><br><span class="line">			&#125;);</span><br><span class="line">			G[e].push_back((Edge) &#123;</span><br><span class="line">				s,di</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		dis[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) &#123; <span class="comment">//Dij</span></span><br><span class="line">			<span class="keyword">int</span> mi=inf,x=<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=n; j++)</span><br><span class="line">				<span class="keyword">if</span>(!vis[j]&amp;&amp;dis[j]&lt;mi) mi=dis[x=j];</span><br><span class="line">			<span class="keyword">if</span>(x==<span class="number">-1</span>||mi==inf) <span class="keyword">break</span>;</span><br><span class="line">			vis[x]=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G[x].size(); j++) &#123;</span><br><span class="line">				Edge e=G[x][j];</span><br><span class="line">				dis[e.to]=min(dis[e.to],dis[x]+e.cost);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;elpow[i]),tot+=elpow[i];</span><br><span class="line">			<span class="keyword">if</span>(dis[i]!=inf) cnt+=dis[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=cnt; j&gt;=dis[i]; j--)</span><br><span class="line">				dp[j]=max(dp[j],dp[j-dis[i]]+elpow[i]);</span><br><span class="line">		<span class="keyword">bool</span> ok=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=cnt; i++)</span><br><span class="line">			<span class="keyword">if</span>(dp[i]&gt;tot/<span class="number">2</span>) &#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);</span><br><span class="line">				ok=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">if</span>(ok) <span class="built_in">puts</span>(<span class="string">"impossible"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="B-Consumer-HDU-3449"><a href="#B-Consumer-HDU-3449" class="headerlink" title="B - Consumer(HDU  3449)"></a>B - Consumer(HDU  3449)</h3><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>有钱W，有物品，买一组物品之前必须先买盒子，问所得的最大值 </p>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>不多说，几乎是依赖背包模板，注意将上层的dp值转移，将盒子变成-1.</p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(x,y) (x)&gt;(y)?(x):(y)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">LL dp[<span class="number">55</span>][<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> W,n;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;W)!=EOF) &#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> box,num;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;box,&amp;num);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=box; j++)<span class="comment">//将盒子变成-1</span></span><br><span class="line">				dp[i][j]=<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=box; j&lt;=W; j++)<span class="comment">//转移</span></span><br><span class="line">				dp[i][j]=dp[i<span class="number">-1</span>][j-box];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=num; j++) &#123;</span><br><span class="line">				LL	val,cost;</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;cost,&amp;val);</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k=W; k&gt;=cost&amp;&amp;dp[i][k-cost]!=<span class="number">-1</span>; k--)<span class="comment">//更新</span></span><br><span class="line">					dp[i][k]=max(dp[i][k],dp[i][k-cost]+val);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=W; j++)<span class="comment">//记得这层可以不取！！</span></span><br><span class="line">				dp[i][j]=max(dp[i][j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,dp[n][W]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="C-CRB-and-His-Birthday-HDU-5410"><a href="#C-CRB-and-His-Birthday-HDU-5410" class="headerlink" title="C - CRB and His Birthday(HDU 5410)"></a>C - CRB and His Birthday(HDU 5410)</h3><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你nn元钱，mm类糖果，每类糖果分别有p,a,bp,a,b,pp表示单价，假设付了w<em>pw∗p元，那么他能获得a</em>w + ba∗w+b个糖果。求最大的糖果数。 </p>
<h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>完全背包很显然，但是不同的是当取了一个物品，会有附加的b出现。这个时候可以想到在dp数组中多开一维，表示对于第i个物品是否已经取了，这样就可以转移了，即将上层进行转移，或者是通过该物品来更新次体力值</p>
<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(s) memset(s,0,sizeof(s))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">2</span>][M][<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		<span class="keyword">int</span> m, n;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;m,&amp;n);</span><br><span class="line">		clr(dp);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> p,a,b,cur=i&amp;<span class="number">1</span>;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p,&amp;a,&amp;b);</span><br><span class="line">			clr(dp[cur]);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=m; j++)</span><br><span class="line">				dp[cur][j][<span class="number">0</span>]=max(dp[!cur][j][<span class="number">0</span>],dp[!cur][j][<span class="number">1</span>]);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=p; j&lt;=m; j++)</span><br><span class="line">				dp[cur][j][<span class="number">1</span>]=max(dp[cur][j-p][<span class="number">1</span>]+a,dp[cur][j-p][<span class="number">0</span>]+a+b);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,max(dp[n&amp;<span class="number">1</span>][m][<span class="number">0</span>],dp[n&amp;<span class="number">1</span>][m][<span class="number">1</span>]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p> 当然此题仍能继续优化，注意到dp数组开了3维，虽然是滚动，但在一定的方面仍能继续优化，我们可以先跑一遍a+b的01背包，再跑一遍a的完全背包，这样只需一维即可，即是体力值</p>
<p>下面贴上zryabc大佬的代码</p>
<h3 id="代码（升级）"><a href="#代码（升级）" class="headerlink" title="代码（升级）"></a>代码（升级）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> p[<span class="number">1005</span>],a[<span class="number">1005</span>],b[<span class="number">1005</span>];</span><br><span class="line"><span class="keyword">int</span> f[<span class="number">2005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;m,&amp;n);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p[i],&amp;a[i],&amp;b[i]);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=p[i];j--)</span><br><span class="line">				f[j]=max(f[j],f[j-p[i]]+a[i]+b[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=p[i];j&lt;=m;j++)</span><br><span class="line">				f[j]=max(f[j],f[j-p[i]]+a[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;f[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="D-Bone-Collector-II-HDU-2639"><a href="#D-Bone-Collector-II-HDU-2639" class="headerlink" title="D - Bone Collector II(HDU 2639)"></a>D - Bone Collector II(HDU 2639)</h3><h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定n个物品和一个体积为V的背包,每个物品有体积vvv和重量hhh两个属性，求用此背包能得到的第KKK大重量。价值相同的方案只算一次。 </p>
<h3 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h3><p>其实感觉这题和背包没什么关系，但这是存储能达到的重量，我们可以将重量看成价值，对于每一个的体积，我们都存前k个大的价值，这样就能就行下一层的转移了。</p>
<h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> w,v;</span><br><span class="line">&#125; A[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1005</span>][<span class="number">35</span>],C[<span class="number">105</span>],B[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">int</span> n,V,k,r=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;V,&amp;k);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].w);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].v);</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V; j&gt;=A[i].v; j--) &#123;</span><br><span class="line">				<span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">1</span>; r&lt;=k; r++)	</span><br><span class="line">					C[++len]=dp[j][r],C[++len]=dp[j-A[i].v][r]+A[i].w;</span><br><span class="line">				sort(C+<span class="number">1</span>,C+<span class="number">1</span>+len);</span><br><span class="line">				<span class="keyword">int</span> lenb=<span class="number">0</span>;B[++lenb]=C[len];</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=len<span class="number">-1</span>;r&gt;=<span class="number">1</span>;r--) </span><br><span class="line">					<span class="keyword">if</span>(C[r]!=C[r+<span class="number">1</span>]) B[++lenb]=C[r];</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">1</span>; r&lt;=min(lenb,k); r++)</span><br><span class="line">					dp[j][r]=B[r];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[V][k]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="优化-1"><a href="#优化-1" class="headerlink" title="优化"></a>优化</h3><p>当然这是比较low的版本，因为这里直接使用了sort，我们不难发现，在B，C数组中的数都是有序的，这里可以采用归并。比较简单的优化，但可能会牺牲代码的可读性。</p>
<p>下面依旧贴上zryabc大佬的代码</p>
<h3 id="代码（升级）-1"><a href="#代码（升级）-1" class="headerlink" title="代码（升级）"></a>代码（升级）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="keyword">int</span> w[<span class="number">105</span>],v[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n,V,K;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1005</span>][<span class="number">35</span>];</span><br><span class="line"><span class="keyword">int</span> A[<span class="number">35</span>],B[<span class="number">35</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;V,&amp;K);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;v[i]);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;w[i]);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;<span class="comment">//枚举每一个点</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=w[i];j--)&#123;<span class="comment">//背包</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=K;k++)&#123;<span class="comment">//枚举k,A,B数组分别表示装与不装</span></span><br><span class="line">					A[k]=dp[j][k];</span><br><span class="line">					B[k]=dp[j-w[i]][k]+v[i];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">int</span> a,b,c;</span><br><span class="line">				a=b=c=<span class="number">1</span>;</span><br><span class="line">				A[K+<span class="number">1</span>]=B[K+<span class="number">1</span>]=<span class="number">-1</span>;</span><br><span class="line">				<span class="keyword">while</span>(c&lt;=K&amp;&amp;(A[a]!=<span class="number">-1</span>||B[b]!=<span class="number">-1</span>))&#123;<span class="comment">//合并两个有序数组</span></span><br><span class="line">					<span class="keyword">if</span>(A[a]&lt;B[b])dp[j][c]=B[b++];</span><br><span class="line">					<span class="keyword">else</span> dp[j][c]=A[a++];</span><br><span class="line">					<span class="keyword">if</span>(dp[j][c]!=dp[j][c<span class="number">-1</span>])c++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[V][K]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>## </p>
<h3 id="E-Dream-City-ZOJ-3211"><a href="#E-Dream-City-ZOJ-3211" class="headerlink" title="E - Dream City(ZOJ 3211)"></a>E - Dream City(ZOJ 3211)</h3><h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你nnn棵树，每棵树第一天有aia_iai的果实，每天增长值bib_ibi你要在mmm天内每天砍一棵树（砍下即得到全部果实值）求mmm天内得到最大果实值。 </p>
<h3 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h3><p>125养猪。。。先排序再dp，没什么思路，走一波就好了</p>
<h3 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  M 270</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(x,y) (x)&gt;(y)?(y):(x)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(x,y) (x)&gt;(y)?(x):(y)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b;</span><br><span class="line">&#125;A[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x.b&lt;y.b || (x.b==y.b&amp;&amp;x.a&gt;y.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> dp[M][M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">int</span> n,m;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].a);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].b);</span><br><span class="line">		sort(A+<span class="number">1</span>,A+<span class="number">1</span>+n,cmp);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">				dp[i][j]=max(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+A[i].a+A[i].b*(j<span class="number">-1</span>));</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n][m]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="F-Cup-3-ZOJ-3682"><a href="#F-Cup-3-ZOJ-3682" class="headerlink" title="F - Cup 3(ZOJ 3682)"></a>F - Cup 3(ZOJ 3682)</h3><h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><p>有两种球迷s1s_1s1 个和s2s_2s2个。共有nnn个球场，每个球场的人数为viv_ivi个，每个球场要么全部是一类球迷，要么两类球迷的人数相同，求把球迷分配到球场的合法方案数。数据保证合法。</p>
<h3 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h3><p>一维dp，表示在s1球员是i人时有多少方案。不难发现转移有3种方法，一是全部s1，一是全部s2，一是一半一半。当然对于指定的球场以及s1人数，我们可以算出s2，所以可以省一维，而且时间上会快很多。</p>
<h3 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 1000000007</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> K 205</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[N],A[K],sum[K],n,s1,s2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;s1,&amp;s2)!=EOF) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]),sum[i]=A[i]+sum[i<span class="number">-1</span>];</span><br><span class="line">		dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;=<span class="number">1</span>; i--)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> S1=s1; S1&gt;=<span class="number">0</span>; S1--) &#123;</span><br><span class="line">				<span class="keyword">int</span> x=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span>(S1&gt;=A[i]) x+=dp[S1-A[i]],x%=M;</span><br><span class="line">				<span class="keyword">if</span>(sum[n]-sum[i<span class="number">-1</span>]-S1&gt;=A[i]) x+=dp[S1],x%=M;</span><br><span class="line">				<span class="keyword">if</span>(A[i]%<span class="number">2</span>==<span class="number">0</span>&amp;&amp;S1&gt;=A[i]/<span class="number">2</span>&amp;&amp;(sum[n]-sum[i<span class="number">-1</span>]-S1)&gt;=A[i]/<span class="number">2</span>) x+=dp[S1-A[i]/<span class="number">2</span>],x%=M;</span><br><span class="line">				dp[S1]=x;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[s1]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="G-Course-Selection-System-ZOJ-3956"><a href="#G-Course-Selection-System-ZOJ-3956" class="headerlink" title="G - Course Selection System(ZOJ 3956)"></a>G - Course Selection System(ZOJ 3956)</h3><h3 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定nnn门课，每门课有两个属性Hi和Ci。 如果选出某些课程x1,x2···xm，舒适值为： </p>
<p>$(\sum<em>{i=1}^mH</em>{x<em>i})^2-(\sum</em>{i=1}^mH_{x<em>i})*(\sum</em>{i=1}^mC_{x<em>i})-(\sum</em>{i=1}^mC_{x_i})^2$</p>
<h3 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h3><p>这里将每一节课看成一个物品，将C作为花费，即枚举C，然后去最优的H（最大的），计算，注意，ans要放在循环里进行更新。</p>
<h3 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 505</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">LL dp[M*<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> H[M],C[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		<span class="keyword">int</span> n,tot=<span class="number">0</span>;</span><br><span class="line">		LL ans=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;H[i],&amp;C[i]),tot+=C[i];</span><br><span class="line">		dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=tot; j&gt;=C[i]; j--) &#123;</span><br><span class="line">				<span class="keyword">if</span>(dp[j-C[i]]==<span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">				LL x=dp[j-C[i]]+H[i];</span><br><span class="line">				<span class="keyword">if</span>(x&gt;dp[j]) <span class="comment">//因为H大于C，所以取最大的就好了</span></span><br><span class="line">					dp[j]=x,ans=max(<span class="number">1L</span>L*x*x<span class="number">-1</span>LL*j*x<span class="number">-1</span>LL*j*j,ans);</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="H-I-love-sneakers-HDU3033"><a href="#H-I-love-sneakers-HDU3033" class="headerlink" title="H - I love sneakers!(HDU3033)"></a>H - I love sneakers!(HDU3033)</h3><h3 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h3><p>一些鞋子有kkk种品牌，第k种牌子的鞋子里面有一些品种不同的鞋子，每种都有自己的价格和价值，收藏家有m元想收集每种品牌的鞋子至少一双(但是相同品牌相同品种的鞋他只要一双)，问他总共可以收集多少价值的鞋子。 </p>
<h3 id="思路-7"><a href="#思路-7" class="headerlink" title="思路"></a>思路</h3><p>分组背包，不过不同的是必须在一组中取一个物品，所以转移是不需要将上层的值转移下来，因为如果当上层覆盖了这层是，会将这层的值忽略。</p>
<h3 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 105</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[M][M*M];</span><br><span class="line"><span class="keyword">struct</span> node&#123;</span><br><span class="line">	<span class="keyword">int</span> cost,val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[<span class="number">13</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,k;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k)!=EOF) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) G[i].clear();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">			<span class="keyword">int</span> x,y,z;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">			G[x].push_back((node)&#123;y,z&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=m; j++) </span><br><span class="line">				dp[i][j]=<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G[i].size(); j++)</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> r=m; r&gt;=G[i][j].cost; r--)&#123;</span><br><span class="line">						node x=G[i][j];</span><br><span class="line">						dp[i][r]=max(max(dp[i][r],dp[i][r-x.cost]+x.val),dp[i<span class="number">-1</span>][r-x.cost]+x.val);</span><br><span class="line">					&#125;</span><br><span class="line">		<span class="keyword">if</span>(dp[k][m]&lt;<span class="number">0</span>)</span><br><span class="line">			<span class="built_in">puts</span>(<span class="string">"Impossible"</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[k][m]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="I-Happy-Programming-Contest-ZOJ-3703"><a href="#I-Happy-Programming-Contest-ZOJ-3703" class="headerlink" title="I - Happy Programming Contest(ZOJ 3703)"></a>I - Happy Programming Contest(ZOJ 3703)</h3><h3 id="题目描述-8"><a href="#题目描述-8" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定时间T和n道题目，每道题目有两个属性花费的时间t和获得愉悦度v 求在T时间内，可以获得最大愉悦度，满足最大愉悦度的前提下，最多的题目，再用最少的罚时（时间为每道题目提交的时间之和）。 </p>
<h3 id="思路-8"><a href="#思路-8" class="headerlink" title="思路"></a>思路</h3><p>挺水的，dp数组开成结构体，在根据愉悦度、题数和罚时以次更新即可，比较简单，只需注意好顺序更新和主次即可。注意罚时可以贪心，即先排序在进行罚时计算</p>
<h3 id="代码-8"><a href="#代码-8" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 55</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> cost,val;</span><br><span class="line">&#125; A[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (x.cost&lt;y.cost) || (x.cost==y.cost&amp;&amp;x.val&gt;y.val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> Node &#123;</span><br><span class="line">	<span class="keyword">int</span> num,score,<span class="keyword">p_t</span>,last;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,score,num,<span class="keyword">p_t</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; dp[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T,alt,n;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;alt,&amp;n)!=EOF) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].cost);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].val);</span><br><span class="line">		sort(A+<span class="number">1</span>,A+<span class="number">1</span>+n,cmp);</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=alt; j&gt;=A[i].cost; j--) &#123;</span><br><span class="line">				<span class="keyword">int</span> x=j-A[i].cost;</span><br><span class="line">				<span class="keyword">if</span>(dp[x].score+A[i].val&lt;dp[j].score) <span class="keyword">continue</span>;</span><br><span class="line">				<span class="keyword">if</span>(dp[x].score+A[i].val&gt;dp[j].score) &#123;</span><br><span class="line">					dp[j].score=dp[x].score+A[i].val;</span><br><span class="line">					dp[j].num=dp[x].num+<span class="number">1</span>;</span><br><span class="line">					dp[j].last=dp[x].last+A[i].cost;</span><br><span class="line">					dp[j].<span class="keyword">p_t</span>=dp[x].<span class="keyword">p_t</span>+dp[j].last;</span><br><span class="line">					<span class="keyword">continue</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(dp[x].num+<span class="number">1</span>&lt;dp[j].num) <span class="keyword">continue</span>;</span><br><span class="line">				<span class="keyword">if</span>(dp[x].num+<span class="number">1</span>&gt;dp[j].num) &#123;</span><br><span class="line">					dp[j].num=dp[x].num+<span class="number">1</span>;</span><br><span class="line">					dp[j].last=dp[x].last+A[i].cost;</span><br><span class="line">					dp[j].<span class="keyword">p_t</span>=dp[x].<span class="keyword">p_t</span>+dp[j].last;</span><br><span class="line">					<span class="keyword">continue</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(dp[j].<span class="keyword">p_t</span>&lt;dp[x].<span class="keyword">p_t</span>+A[i].cost+dp[x].last) <span class="keyword">continue</span>;</span><br><span class="line">				dp[j].last=dp[x].last+A[i].cost;</span><br><span class="line">				dp[j].<span class="keyword">p_t</span>=dp[x].<span class="keyword">p_t</span>+dp[j].last;</span><br><span class="line">			&#125;</span><br><span class="line">			dp[alt].print();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Math-Magic-ZOJ-3662"><a href="#Math-Magic-ZOJ-3662" class="headerlink" title="Math Magic(ZOJ 3662)"></a>Math Magic(ZOJ 3662)</h3><h3 id="题目描述-9"><a href="#题目描述-9" class="headerlink" title="题目描述"></a>题目描述</h3><p>有K个正数，求有多少种方案满足： </p>
<p>$SUM(A_1,A_2,A_3,\cdots,A_K)=N$</p>
<p> $LCM(A_1,A_2,A_3,\cdots,A_K)=M$</p>
<h3 id="思路-9"><a href="#思路-9" class="headerlink" title="思路"></a>思路</h3><p>dp开三维，第一维滚动，第二维sum，第三位lcm，我们发现m的因子并不多，所以可以进行离散化，然后用刷表，更新即可。（分组背包+完全背包）</p>
<h3 id="代码-9"><a href="#代码-9" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 1005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S(x) son[(x)].size()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Q 1000000007</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lcm(x,y) x*y/gcd(x,y)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> b==<span class="number">0</span>?a:gcd(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; son[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=M<span class="number">-5</span>; i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;=M<span class="number">-5</span>; j+=i)</span><br><span class="line">			son[j].push_back(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">2</span>][M][<span class="number">35</span>],into[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Init();</span><br><span class="line">	<span class="keyword">int</span> n,m,k;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k)!=EOF) &#123; <span class="comment">//sum lcm num</span></span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;S(m); i++)</span><br><span class="line">			into[son[m][i]]=i;</span><br><span class="line">		dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> cur=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> q=<span class="number">1</span>; q&lt;=k; q++) &#123; <span class="comment">//取k个数</span></span><br><span class="line">			cur=q&amp;<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;S(m); j++) dp[cur][i][j]=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;S(m); i++) &#123; <span class="comment">//最小公倍数</span></span><br><span class="line">				<span class="keyword">int</span> x=son[m][i];</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;S(m); r++) &#123; <span class="comment">//加入的数</span></span><br><span class="line">					<span class="keyword">int</span> y=son[m][r];</span><br><span class="line">					<span class="keyword">int</span> num=into[lcm(x,y)];</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> j=q<span class="number">-1</span>; j+y&lt;=n; j++) <span class="comment">//枚举和 dp[!cur][j][i]-&gt;dp[cur][j+y][num]</span></span><br><span class="line">						dp[cur][j+y][num]+=dp[!cur][j][i],dp[cur][j+y][num]%=Q;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[cur][n][S(m)<span class="number">-1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="K-We-Need-Medicine-ZOJ-3812"><a href="#K-We-Need-Medicine-ZOJ-3812" class="headerlink" title="K - We Need Medicine(ZOJ 3812)"></a>K - We Need Medicine(ZOJ 3812)</h3><h3 id="题目描述-10"><a href="#题目描述-10" class="headerlink" title="题目描述"></a>题目描述</h3><p>给出N种药，每种药有两个属性，重量W，伤害值T。给出Q种疾病，每个疾病也有两个属性：重量Wi，伤害值Si。现在要求你对每种疾病设计选择药的方案，满足：1.每种药至多使用一次。2.选出的药的重量的和等于该疾病的重量，选出的药的伤害值的和等于该疾病的伤害值。如果存在方案，输出任何一个方案。否则，输出“No solution”.  </p>
<h3 id="思路-10"><a href="#思路-10" class="headerlink" title="思路"></a>思路</h3><p>因为数据并不大，所以可以用LL的二进制来保存（溢出的值会自动删去）。但此题的重点是路径保存，在dp的路径保存中，很容易想到用数组nxt来维护，即到达i，j的物品是什么。但我们发现如果暴力扫会超时，所以对于路径保存需要更优的方法。我们可以想到，对于任意路径，只要是更新过了，就不需要再次更新了。所以我们在dp更新前保存值，在更新后用亦或来取出此次被更新的体力值，在用x&amp;-x来取出最后一位1，用bin数组映射。因为数组开不下，所以想到map（或者另开数组，二分查找），两种方法都可以，此处采用map。（背包+位优化）</p>
<h3 id="代码-10"><a href="#代码-10" class="headerlink" title="代码"></a>代码</h3> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 55</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> cost,val;<span class="comment">//weight,hurt</span></span><br><span class="line">&#125; A[M*<span class="number">8</span>],Q[M*<span class="number">8</span>];</span><br><span class="line">LL dp[N];</span><br><span class="line"><span class="keyword">int</span> nxt[M][N];</span><br><span class="line"><span class="built_in">map</span>&lt;LL,<span class="keyword">int</span>&gt; bin;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=M<span class="number">-5</span>; i++)</span><br><span class="line">		bin[<span class="number">1L</span>L*<span class="number">1</span>&lt;&lt;i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*int search(LL x) &#123;</span><br><span class="line">	int l=0,r=50;</span><br><span class="line">	while(l&lt;=r) &#123;</span><br><span class="line">		int mid=(l+r)&gt;&gt;1;</span><br><span class="line">		if(bin[mid]==x) return mid;</span><br><span class="line">		if(bin[mid]&lt;x) l=mid+1;</span><br><span class="line">		else r=mid-1;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;二分搜索*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	init();</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		<span class="keyword">int</span> n,q;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;q);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;A[i].val,&amp;A[i].cost);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;Q[i].val,&amp;Q[i].cost);</span><br><span class="line">		<span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="built_in">memset</span>(nxt,<span class="number">0</span>,<span class="keyword">sizeof</span>(nxt));</span><br><span class="line">		dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=N<span class="number">-5</span>; j&gt;=A[i].cost; j--) &#123;</span><br><span class="line">				LL s=dp[j];</span><br><span class="line">				dp[j]|=dp[j-A[i].cost]&lt;&lt;A[i].val;</span><br><span class="line">				s^=dp[j];</span><br><span class="line">				<span class="keyword">while</span>(s) &#123;</span><br><span class="line">					LL k=s&amp;-s;</span><br><span class="line">					nxt[bin[k]][j]=i;</span><br><span class="line">					s-=k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q; i++) &#123;</span><br><span class="line">			LL s=<span class="number">1L</span>L*<span class="number">1</span>&lt;&lt;Q[i].val;</span><br><span class="line">			<span class="keyword">if</span>(!(dp[Q[i].cost]&amp;s)) <span class="built_in">printf</span>(<span class="string">"No solution!"</span>);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">while</span>(Q[i].val) &#123;</span><br><span class="line">					<span class="keyword">if</span>(Q[i].cost-A[nxt[Q[i].val][Q[i].cost]].cost==<span class="number">0</span>)</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">"%d"</span>,nxt[Q[i].val][Q[i].cost]);</span><br><span class="line">					<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d "</span>,nxt[Q[i].val][Q[i].cost]);</span><br><span class="line">					<span class="keyword">int</span> q_=Q[i].cost;</span><br><span class="line">					Q[i].cost-=A[nxt[Q[i].val][Q[i].cost]].cost;</span><br><span class="line">					Q[i].val-=A[nxt[Q[i].val][q_]].val;</span><br><span class="line">				&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="L-Crazy-Shopping-ZOJ-3524"><a href="#L-Crazy-Shopping-ZOJ-3524" class="headerlink" title="L - Crazy Shopping(ZOJ 3524)"></a>L - Crazy Shopping(ZOJ 3524)</h3><h3 id="题目描述-11"><a href="#题目描述-11" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个有向无环图和一个起点xxx，这个人背着一个容量为WWW大的包装物品，从一点走到另一个点，而且花费体力为：包里的物品重量乘以两点间的距离，每个点都有一种商品，可以买无限多个，问在得到最大价值的时候最少花费的体力是多少。 </p>
<h3 id="思路-11"><a href="#思路-11" class="headerlink" title="思路"></a>思路</h3><p>完全背包+拓扑排序+刷表。从起点起，用一个点的子节点来更新父节点，dp开成结构体，一是dis二是val，重载运算符进行更新就好了。注意在dp前要进行bfs,将多有可以达到的点Mark掉，否则达不到的点在自己跑了一遍完全背包后会将父节点更新，这样起点就不会固定了。因为该图是一个有向无环图，那么一有顶点入度为0，而入度为0的点一定不能更新，所以我们只要把与之相连的点更新了，就可以不必再用该点，而正是如此，就可以一层层的消去点，须起的每一条路都只用了一次 。</p>
<h3 id="代码-11"><a href="#代码-11" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 605</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(s,k) memset(s,k,sizeof(s))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Qclr(Q) while(!Q.empty()) Q.pop()</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,w,st;</span><br><span class="line"><span class="keyword">struct</span> Edge &#123;</span><br><span class="line">	<span class="keyword">int</span> to,cost;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;Edge&gt; G[M];</span><br><span class="line"><span class="keyword">int</span> in[M],pos[M],mark[M];</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> dis,val;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &gt; (<span class="keyword">const</span> node &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> val&gt;x.val || (val==x.val&amp;&amp;dis&lt;x.dis);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; dp[M][<span class="number">2005</span>];</span><br><span class="line"><span class="keyword">struct</span> Node &#123;</span><br><span class="line">	<span class="keyword">int</span> w,v;</span><br><span class="line">&#125; A[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(node &amp;x,node y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(y&gt;x) x=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Qclr(q);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">		<span class="keyword">if</span>(!in[i]) q.push(i);</span><br><span class="line">	<span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">		<span class="keyword">int</span> now=q.front();</span><br><span class="line">		q.pop();</span><br><span class="line">		pos[++len]=now;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G[now].size(); i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> nxt=G[now][i].to;</span><br><span class="line">			in[nxt]--;</span><br><span class="line">			<span class="keyword">if</span>(!in[nxt]) q.push(nxt);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;n,&amp;m,&amp;w,&amp;st)) &#123;</span><br><span class="line">		clr(in,<span class="number">0</span>);</span><br><span class="line">		clr(pos,<span class="number">0</span>);</span><br><span class="line">		clr(dp,<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) G[i].clear();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;A[i].w,&amp;A[i].v);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> x,y,c;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;x,&amp;y,&amp;c);</span><br><span class="line">			Edge e=(Edge) &#123;</span><br><span class="line">				y,c</span><br><span class="line">			&#125;;</span><br><span class="line">			G[x].push_back(e);</span><br><span class="line">			in[y]++;</span><br><span class="line">		&#125;</span><br><span class="line">		Sort();</span><br><span class="line">		<span class="keyword">int</span> sta=<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n&amp;&amp;sta==<span class="number">-1</span>; i++)</span><br><span class="line">			<span class="keyword">if</span>(pos[i]==st) sta=i;</span><br><span class="line">		node ans=(node)&#123;<span class="number">2e9</span>,<span class="number">-2e9</span>&#125;;</span><br><span class="line">		clr(mark,<span class="number">0</span>);</span><br><span class="line">		Qclr(q);</span><br><span class="line">		q.push(st);</span><br><span class="line">		mark[st]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">			<span class="keyword">int</span> c=q.front();</span><br><span class="line">			q.pop();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G[c].size(); i++)</span><br><span class="line">				<span class="keyword">if</span>(!mark[G[c][i].to])</span><br><span class="line">					q.push(G[c][i].to),mark[G[c][i].to]=<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=sta; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> now=pos[i];</span><br><span class="line">			<span class="keyword">if</span>(!mark[now])  <span class="keyword">continue</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> r=A[now].w; r&lt;=w; r++) &#123;</span><br><span class="line">				node x=dp[now][r-A[now].w];</span><br><span class="line">				x.val+=A[now].v;</span><br><span class="line">				check(dp[now][r],x);</span><br><span class="line">				check(ans,dp[now][r]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;G[now].size(); j++) &#123;</span><br><span class="line">				<span class="keyword">int</span> nxt=G[now][j].to,d=G[now][j].cost;<span class="comment">//now -&gt; nxt</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;=w; r++) &#123;</span><br><span class="line">					node x=dp[now][r];</span><br><span class="line">					x.dis+=r*d;</span><br><span class="line">					check(dp[nxt][r],x);</span><br><span class="line">					check(ans,dp[nxt][r]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans.dis);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="M-Coins-来源不详"><a href="#M-Coins-来源不详" class="headerlink" title="M - Coins(来源不详)"></a>M - Coins(来源不详)</h3><h3 id="题目描述-12"><a href="#题目描述-12" class="headerlink" title="题目描述"></a>题目描述</h3><p>给出硬币面额及每种硬币的个数，求从1到m能凑出面额的个数。  </p>
<h3 id="思路-12"><a href="#思路-12" class="headerlink" title="思路"></a>思路</h3><p>多重背包模板，二进制+bitset，没什么好说的，见代码。</p>
<h3 id="代码-12"><a href="#代码-12" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> num,val;</span><br><span class="line">&#125; A[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> coin[<span class="number">5005</span>];</span><br><span class="line"><span class="built_in">bitset</span>&lt;100005&gt; dp;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</span><br><span class="line">		<span class="keyword">if</span>(m==<span class="number">0</span>&amp;&amp;n==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].val);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i].num);</span><br><span class="line">		<span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> t=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>((t&lt;&lt;<span class="number">1</span>)&lt;=A[i].num) &#123;</span><br><span class="line">				coin[++len]=t*A[i].val;</span><br><span class="line">				t&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			coin[++len]=(A[i].num-t+<span class="number">1</span>)*A[i].val;</span><br><span class="line">		&#125;</span><br><span class="line">		dp.reset();</span><br><span class="line">		dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=len; i++)</span><br><span class="line">			dp|=(dp&lt;&lt;coin[i]);</span><br><span class="line">		<span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">			cnt+=dp[i];</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,cnt);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="优化-2"><a href="#优化-2" class="headerlink" title="优化"></a>优化</h3><p>对于多重背包，可以用单调队列（本人并不会），所以从网上copy了代码</p>
<h3 id="代码（升级）-2"><a href="#代码（升级）-2" class="headerlink" title="代码（升级）"></a>代码（升级）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100010</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">150</span>;</span><br><span class="line"><span class="keyword">int</span> w[MAXN], c[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">bool</span> dp[M], <span class="built_in">queue</span>[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve_dp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">memset</span>(<span class="built_in">queue</span>, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="built_in">queue</span>));</span><br><span class="line">	dp[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(c[i] == <span class="number">1</span>) &#123;     <span class="comment">// 仅允许一个包, 变成01背包问题</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> v = m; v &gt;= w[i]; v--) &#123;</span><br><span class="line">				<span class="keyword">if</span>(!dp[v] &amp;&amp; dp[v-w[i]])</span><br><span class="line">					dp[v] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(c[i]*w[i] &gt;= m) &#123;   <span class="comment">// 完全背包问题, 即 w[i]*c[i] &lt; m, 放入件数的限制是 c[i]</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> v = w[i]; v &lt;= m; v++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(!dp[v] &amp;&amp; dp[v-w[i]])</span><br><span class="line">					dp[v] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; <span class="comment">// 严格的分组背包问题</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> d = <span class="number">0</span>; d &lt; w[i]; d++) &#123;      <span class="comment">// 对于所有余数 d [0, w[i])</span></span><br><span class="line">				<span class="comment">// 窗口大小为 c[i]</span></span><br><span class="line">				<span class="keyword">int</span> sum = <span class="number">0</span>, st = <span class="number">0</span>, ed = <span class="number">-1</span>;   <span class="comment">//st,ed 单调队列的开始和结尾, sum 队列中是否有一个 true</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> v = d; v &lt;= m; v+= w[i]) &#123;   <span class="comment">// 完全背包 model, 但步长是 w[i]</span></span><br><span class="line">					<span class="keyword">if</span>(ed - st == c[i]) &#123;   <span class="comment">// 窗口大小为0, 移除队首元素, 队首后移一位</span></span><br><span class="line">						sum -= <span class="built_in">queue</span>[st++];</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="built_in">queue</span>[++ed] = dp[v];</span><br><span class="line">					sum += dp[v];</span><br><span class="line">					<span class="keyword">if</span>(!dp[v] &amp;&amp; sum)</span><br><span class="line">						dp[v] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)</span><br><span class="line">		res += dp[i];</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &amp;&amp; n != <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;c[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// main function</span></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; solve_dp() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="N-Cookie-Choice-ZOJ-3164"><a href="#N-Cookie-Choice-ZOJ-3164" class="headerlink" title="N - Cookie Choice(ZOJ 3164)"></a>N - Cookie Choice(ZOJ 3164)</h3><h3 id="题目描述-13"><a href="#题目描述-13" class="headerlink" title="题目描述"></a>题目描述</h3><p>有n种物品，每种物品有333个属性：个数Ki等于000时表示无限多)，价值E，体积Pi。</p>
<p>还有一个限制条件，某些物品是属于一类的。一类物品中，最多选择一种。</p>
<p>求恰好组成体积V，可以得到的最大价值。</p>
<h3 id="思路-13"><a href="#思路-13" class="headerlink" title="思路"></a>思路</h3><p>分组背包+多重背包+完全背包(混合背包)。注意对于每一种情况跑好就行了，读入要注意，没有分组的背包，自己独立一组，在跑的时候会比较清晰。多重背包要二进制，注意在背包无法装满是可转化为完全背包。</p>
<h3 id="代码-13"><a href="#代码-13" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 1030</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf -1e18</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> node &#123;</span><br><span class="line">	<span class="keyword">int</span> num,cost,val;</span><br><span class="line">&#125; A[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; K[M];</span><br><span class="line"><span class="keyword">int</span> mark[M];</span><br><span class="line">LL dp[M][M],f[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(LL &amp;x,LL y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x&lt;y) x=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(node &amp;l,<span class="keyword">int</span> p,<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">	l=A[s];</span><br><span class="line">	l.cost*=p;</span><br><span class="line">	l.val*=p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,w,k;</span><br><span class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;w)) &#123;</span><br><span class="line">		<span class="built_in">memset</span>(mark,<span class="number">0</span>,<span class="keyword">sizeof</span>(mark));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;A[i].num,&amp;A[i].val,&amp;A[i].cost);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;M; i++) K[i].clear();</span><br><span class="line">		<span class="keyword">char</span> s=getchar();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line">			s=getchar();</span><br><span class="line">			<span class="keyword">bool</span> ok=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>(s!=<span class="string">'\n'</span>) &#123;</span><br><span class="line">				<span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span>(!ok) s=getchar();</span><br><span class="line">				ok=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">while</span>(s&lt;=<span class="string">'9'</span>&amp;&amp;s&gt;=<span class="string">'0'</span>) &#123;</span><br><span class="line">					num=num*<span class="number">10</span>+s-<span class="string">'0'</span>;</span><br><span class="line">					s=getchar();</span><br><span class="line">				&#125;</span><br><span class="line">				K[i].push_back(num);</span><br><span class="line">				mark[num]=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">			<span class="keyword">if</span>(!mark[i]) K[++k].push_back(i);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=k; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=w; j++) dp[i][j]=inf;</span><br><span class="line">		dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123; <span class="comment">//第i组</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;K[i].size(); j++) &#123; <span class="comment">//第j个物品</span></span><br><span class="line">				<span class="keyword">int</span> now=K[i][j];</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;=w; r++) f[r]=dp[i<span class="number">-1</span>][r];</span><br><span class="line">				<span class="keyword">if</span>(A[now].num==<span class="number">0</span>||A[now].num*A[now].cost&gt;=w) &#123; <span class="comment">//完全背包</span></span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> r=A[now].cost; r&lt;=w; r++)</span><br><span class="line">						<span class="keyword">if</span>(f[r-A[now].cost]!=inf) check(f[r],f[r-A[now].cost]+A[now].val);</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;=w; r++)</span><br><span class="line">						check(dp[i][r],f[r]);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123; <span class="comment">//多重背包</span></span><br><span class="line">					<span class="keyword">int</span> len=<span class="number">0</span>,base=<span class="number">1</span>;node x;</span><br><span class="line">					<span class="keyword">while</span>((base&lt;&lt;<span class="number">1</span>)&lt;=A[now].num) &#123;</span><br><span class="line">						change(x,base,now);</span><br><span class="line">						base&lt;&lt;=<span class="number">1</span>; </span><br><span class="line">						<span class="keyword">for</span>(<span class="keyword">int</span> r=w; r&gt;=x.cost; r--)<span class="comment">//01背包</span></span><br><span class="line">							<span class="keyword">if</span>(f[r-x.cost]!=inf)</span><br><span class="line">								check(f[r],f[r-x.cost]+x.val);</span><br><span class="line">					&#125;</span><br><span class="line">					change(x,A[now].num-base+<span class="number">1</span>,now);<span class="comment">//二进制处理</span></span><br><span class="line">						<span class="keyword">for</span>(<span class="keyword">int</span> r=w; r&gt;=x.cost; r--)</span><br><span class="line">							<span class="keyword">if</span>(f[r-x.cost]!=inf)</span><br><span class="line">								check(f[r],f[r-x.cost]+x.val);</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;=w; r++)</span><br><span class="line">						check(dp[i][r],f[r]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>; r&lt;=w; r++) check(dp[i][r],dp[i<span class="number">-1</span>][r]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(dp[k][w]&lt;<span class="number">0</span>) <span class="built_in">puts</span>(<span class="string">"i'm sorry..."</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[k][w]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="优化-3"><a href="#优化-3" class="headerlink" title="优化"></a>优化</h3><p>当然可以将01背包，完全背包和多重背包写为函数，这样层次更分明。多重背包可以使用单调队列来优化，但现在不要求掌握。单调队列代码可以参照上面的，这里就不给出了。</p>
<h3 id="O-Exact-Compression-ZOJ-3931"><a href="#O-Exact-Compression-ZOJ-3931" class="headerlink" title="O - Exact Compression(ZOJ 3931)"></a>O - Exact Compression(ZOJ 3931)</h3><h3 id="题目描述-14"><a href="#题目描述-14" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定大小为S的字符集，每个字符出现的次数为Fi求是否有满足条件的哈夫曼编码使得0出现的次数刚好为E。 </p>
<h3 id="思路-14"><a href="#思路-14" class="headerlink" title="思路"></a>思路</h3><p>我们发现实际上可达的数值上限只有448000 ，所以bitset可以承受。所以我们只用对于每一个数，将其当初价值即可，最后用bitset来判e就行了。哈夫曼编码就不必多说了，优先对列走一波。(注意滚动数组，不能将上层直接转移)</p>
<h3 id="代码-14"><a href="#代码-14" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 130</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(Q) while(!Q.empty()) Q.pop();</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M];</span><br><span class="line"><span class="built_in">bitset</span>&lt;896000&gt; dp[<span class="number">2</span>];</span><br><span class="line">priority_queue&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		dp[<span class="number">1</span>].reset();</span><br><span class="line">		<span class="keyword">int</span> n;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">		clr(q);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> x;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">			q.push(-x);</span><br><span class="line">		&#125;</span><br><span class="line">		dp[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> cur=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(q.size()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">			<span class="keyword">int</span> x=-q.top();q.pop();</span><br><span class="line">			<span class="keyword">int</span> y=-q.top();q.pop();</span><br><span class="line">			dp[cur].reset();</span><br><span class="line">			dp[cur]=(dp[!cur]&lt;&lt;x)|(dp[!cur]&lt;&lt;y);</span><br><span class="line">			x+=y;q.push(-x);</span><br><span class="line">			cur=!cur;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> E;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;E);</span><br><span class="line">		<span class="keyword">if</span>(dp[!cur][E]) <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"No"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="正解"><a href="#正解" class="headerlink" title="正解"></a>正解</h3><p>其实正解是动态滚动dp。看出01背包后发现背包容量特别大！不能纯粹的用循环做背包肯定会超时。可以使用两个队列存能够凑出来的数字（相当于滚动数组的作用），还有一个优化，看当前要压入队列的数字是否已经在队列中，这个可以用map存一下。</p>
<p>下面附上正解代码</p>
<h3 id="正解代码"><a href="#正解代码" class="headerlink" title="正解代码"></a>正解代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> e;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[maxn];</span><br><span class="line"><span class="keyword">struct</span> X &#123;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> a,b;</span><br><span class="line">&#125; u[maxn];</span><br><span class="line"><span class="keyword">int</span> Size,cnt;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>,<span class="keyword">bool</span>&gt;flag;</span><br><span class="line"><span class="keyword">struct</span> cmp &#123;</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> &amp;a,<span class="keyword">long</span> <span class="keyword">long</span> &amp;b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a&gt;b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T--) &#123;</span><br><span class="line">		flag.clear();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;s);</span><br><span class="line">		cnt=<span class="number">0</span>;</span><br><span class="line">		priority_queue&lt;<span class="keyword">long</span> <span class="keyword">long</span>,<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;,cmp&gt;q;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=s; i++) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;f[i]);</span><br><span class="line">			q.push(f[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;e);</span><br><span class="line">		Size=s;</span><br><span class="line">		<span class="keyword">while</span>(Size!=<span class="number">1</span>) &#123;</span><br><span class="line">			u[cnt].a=q.top();</span><br><span class="line">			q.pop();</span><br><span class="line">			Size--;</span><br><span class="line">			u[cnt].b=q.top();</span><br><span class="line">			q.pop();</span><br><span class="line">			Size--;</span><br><span class="line">			q.push(u[cnt].a+u[cnt].b);</span><br><span class="line">			cnt++;</span><br><span class="line">			Size++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">queue</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;Q1;</span><br><span class="line">		<span class="built_in">queue</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;Q2;</span><br><span class="line">		<span class="keyword">int</span> f=<span class="number">0</span>;</span><br><span class="line">		Q1.push(u[<span class="number">0</span>].a);</span><br><span class="line">		Q1.push(u[<span class="number">0</span>].b);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;cnt; i++) &#123;</span><br><span class="line">			flag.clear();</span><br><span class="line">			<span class="keyword">if</span>(f==<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">while</span>(!Q1.empty()) &#123;</span><br><span class="line">					<span class="keyword">if</span>(Q1.front()+u[i].a&lt;=e&amp;&amp;flag[Q1.front()+u[i].a]==<span class="number">0</span>) &#123;</span><br><span class="line">						Q2.push(Q1.front()+u[i].a);</span><br><span class="line">						flag[Q1.front()+u[i].a]=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span>(Q1.front()+u[i].b&lt;=e&amp;&amp;flag[Q1.front()+u[i].b]==<span class="number">0</span>) &#123;</span><br><span class="line">						Q2.push(Q1.front()+u[i].b);</span><br><span class="line">						flag[Q1.front()+u[i].b]=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					Q1.pop();</span><br><span class="line">				&#125;</span><br><span class="line">				f=<span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">while</span>(!Q2.empty()) &#123;</span><br><span class="line">					<span class="keyword">if</span>(Q2.front()+u[i].a&lt;=e&amp;&amp;flag[Q2.front()+u[i].a]==<span class="number">0</span>) &#123;</span><br><span class="line">						Q1.push(Q2.front()+u[i].a);</span><br><span class="line">						flag[Q2.front()+u[i].a]=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span>(Q2.front()+u[i].b&lt;=e&amp;&amp;flag[Q2.front()+u[i].b]==<span class="number">0</span>) &#123;</span><br><span class="line">						flag[Q2.front()+u[i].b]=<span class="number">1</span>;</span><br><span class="line">						Q1.push(Q2.front()+u[i].b);</span><br><span class="line">					&#125;</span><br><span class="line">					Q2.pop();</span><br><span class="line">				&#125;</span><br><span class="line">				f=<span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">bool</span> ans=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(f==<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">while</span>(!Q1.empty()) &#123;</span><br><span class="line">				<span class="keyword">if</span>(Q1.front()==e) ans=<span class="number">1</span>;</span><br><span class="line">				Q1.pop();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(!Q2.empty()) &#123;</span><br><span class="line">				<span class="keyword">if</span>(Q2.front()==e) ans=<span class="number">1</span>;</span><br><span class="line">				Q2.pop();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(ans) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/背包/" rel="tag"># 背包</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/10/卡特朗数列/" rel="next" title="卡特朗数列">
                <i class="fa fa-chevron-left"></i> 卡特朗数列
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/11/Dijsktra/" rel="prev" title="Dijsktra">
                Dijsktra <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">czjxyz</p>
              <p class="site-description motion-element" itemprop="description">学习笔记</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://zryabc.xyz/" target="_blank" title="zryabc">
                      
                        <i class="fa fa-fw fa-globe"></i>zryabc</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://www.chenhowe.me/" target="_blank" title="Little_Jian">
                      
                        <i class="fa fa-fw fa-globe"></i>Little_Jian</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/Paulliant/" target="_blank" title="Paulliant">
                      
                        <i class="fa fa-fw fa-globe"></i>Paulliant</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#背包专题"><span class="nav-number">1.</span> <span class="nav-text">背包专题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#01背包"><span class="nav-number">1.0.1.</span> <span class="nav-text">01背包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#依赖背包"><span class="nav-number">1.0.2.</span> <span class="nav-text">依赖背包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#完全背包"><span class="nav-number">1.0.3.</span> <span class="nav-text">完全背包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多重背包"><span class="nav-number">1.0.4.</span> <span class="nav-text">多重背包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#混合背包"><span class="nav-number">1.0.5.</span> <span class="nav-text">混合背包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分组背包"><span class="nav-number">1.0.6.</span> <span class="nav-text">分组背包</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#背包例题"><span class="nav-number">2.</span> <span class="nav-text">背包例题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-In-Action-来源不详"><span class="nav-number">2.0.1.</span> <span class="nav-text">A - In Action(来源不详)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述"><span class="nav-number">2.0.2.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路"><span class="nav-number">2.0.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码"><span class="nav-number">2.0.4.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-Consumer-HDU-3449"><span class="nav-number">2.0.5.</span> <span class="nav-text">B - Consumer(HDU  3449)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-1"><span class="nav-number">2.0.6.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-1"><span class="nav-number">2.0.7.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-1"><span class="nav-number">2.0.8.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-CRB-and-His-Birthday-HDU-5410"><span class="nav-number">2.0.9.</span> <span class="nav-text">C - CRB and His Birthday(HDU 5410)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-2"><span class="nav-number">2.0.10.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-2"><span class="nav-number">2.0.11.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-2"><span class="nav-number">2.0.12.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化"><span class="nav-number">2.0.13.</span> <span class="nav-text">优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码（升级）"><span class="nav-number">2.0.14.</span> <span class="nav-text">代码（升级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D-Bone-Collector-II-HDU-2639"><span class="nav-number">2.0.15.</span> <span class="nav-text">D - Bone Collector II(HDU 2639)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-3"><span class="nav-number">2.0.16.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-3"><span class="nav-number">2.0.17.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-3"><span class="nav-number">2.0.18.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化-1"><span class="nav-number">2.0.19.</span> <span class="nav-text">优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码（升级）-1"><span class="nav-number">2.0.20.</span> <span class="nav-text">代码（升级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#E-Dream-City-ZOJ-3211"><span class="nav-number">2.0.21.</span> <span class="nav-text">E - Dream City(ZOJ 3211)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-4"><span class="nav-number">2.0.22.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-4"><span class="nav-number">2.0.23.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-4"><span class="nav-number">2.0.24.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#F-Cup-3-ZOJ-3682"><span class="nav-number">2.0.25.</span> <span class="nav-text">F - Cup 3(ZOJ 3682)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-5"><span class="nav-number">2.0.26.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-5"><span class="nav-number">2.0.27.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-5"><span class="nav-number">2.0.28.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G-Course-Selection-System-ZOJ-3956"><span class="nav-number">2.0.29.</span> <span class="nav-text">G - Course Selection System(ZOJ 3956)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-6"><span class="nav-number">2.0.30.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-6"><span class="nav-number">2.0.31.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-6"><span class="nav-number">2.0.32.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#H-I-love-sneakers-HDU3033"><span class="nav-number">2.0.33.</span> <span class="nav-text">H - I love sneakers!(HDU3033)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-7"><span class="nav-number">2.0.34.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-7"><span class="nav-number">2.0.35.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-7"><span class="nav-number">2.0.36.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#I-Happy-Programming-Contest-ZOJ-3703"><span class="nav-number">2.0.37.</span> <span class="nav-text">I - Happy Programming Contest(ZOJ 3703)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-8"><span class="nav-number">2.0.38.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-8"><span class="nav-number">2.0.39.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-8"><span class="nav-number">2.0.40.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Math-Magic-ZOJ-3662"><span class="nav-number">2.0.41.</span> <span class="nav-text">Math Magic(ZOJ 3662)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-9"><span class="nav-number">2.0.42.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-9"><span class="nav-number">2.0.43.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-9"><span class="nav-number">2.0.44.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#K-We-Need-Medicine-ZOJ-3812"><span class="nav-number">2.0.45.</span> <span class="nav-text">K - We Need Medicine(ZOJ 3812)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-10"><span class="nav-number">2.0.46.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-10"><span class="nav-number">2.0.47.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-10"><span class="nav-number">2.0.48.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L-Crazy-Shopping-ZOJ-3524"><span class="nav-number">2.0.49.</span> <span class="nav-text">L - Crazy Shopping(ZOJ 3524)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-11"><span class="nav-number">2.0.50.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-11"><span class="nav-number">2.0.51.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-11"><span class="nav-number">2.0.52.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#M-Coins-来源不详"><span class="nav-number">2.0.53.</span> <span class="nav-text">M - Coins(来源不详)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-12"><span class="nav-number">2.0.54.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-12"><span class="nav-number">2.0.55.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-12"><span class="nav-number">2.0.56.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化-2"><span class="nav-number">2.0.57.</span> <span class="nav-text">优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码（升级）-2"><span class="nav-number">2.0.58.</span> <span class="nav-text">代码（升级）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#N-Cookie-Choice-ZOJ-3164"><span class="nav-number">2.0.59.</span> <span class="nav-text">N - Cookie Choice(ZOJ 3164)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-13"><span class="nav-number">2.0.60.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-13"><span class="nav-number">2.0.61.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-13"><span class="nav-number">2.0.62.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化-3"><span class="nav-number">2.0.63.</span> <span class="nav-text">优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#O-Exact-Compression-ZOJ-3931"><span class="nav-number">2.0.64.</span> <span class="nav-text">O - Exact Compression(ZOJ 3931)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#题目描述-14"><span class="nav-number">2.0.65.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路-14"><span class="nav-number">2.0.66.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码-14"><span class="nav-number">2.0.67.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正解"><span class="nav-number">2.0.68.</span> <span class="nav-text">正解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正解代码"><span class="nav-number">2.0.69.</span> <span class="nav-text">正解代码</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">czjxyz</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
